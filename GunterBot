import discord
import random
import difflib
from discord.ext import commands


def fuzzy_match(input_text, options, threshold=0.7):
    match = difflib.get_close_matches(input_text, options, n=1, cutoff=threshold)
    return match[0] if match else None


# Setup intents correctly
intents = discord.Intents.default()
intents.message_content = True  # REQUIRED to read user messages

# Create bot instance
bot = commands.Bot(command_prefix="!", intents=intents)

greetings = ['Hello!', 'Hi!', 'Hey!', 'Yep, how are you?']
questions = ['how are you', 'who are you']

# When bot is ready
@bot.event
async def on_ready():
    print(f" Logged in as {bot.user}")

# Command: !greet NAME
@bot.command()
async def greet(ctx, name: str):
    await ctx.send(f"Hey {name}, welcome!")

# Command: !ping
@bot.command()
async def ping(ctx):
    await ctx.send("Pong!")

# Respond to natural messages
@bot.event
async def on_message(message):
    if message.author.bot:
        return


    msg = message.content.lower().strip()


# Define known input triggers
    # greetings = ["hi", "hello", "hey", "Hello"]
    # questions = ["how are you", "who are you", "How are you", "Who are you"]


    matched_greeting = fuzzy_match(msg, greetings)
    matched_question = fuzzy_match(msg, questions)


    if matched_greeting:
        response = random.choice(greetings)
        await message.channel.send(f"{response} {message.author.display_name}! ")

    elif matched_question == "how are you":
        await message.channel.send("I'm just code, but I'm good! ")

    elif matched_question == "who are you":
        await message.channel.send("I'm Gunter, your bot.")


# Must include this so commands still work!
        await bot.process_commands(message)





bot.run("")
